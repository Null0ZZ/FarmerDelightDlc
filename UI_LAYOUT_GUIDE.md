# 成就节点编辑器 - 界面布局说明

## 整体界面结构

```
┌─────────────────────────────────────────────────────────────┐
│  模组共创中心                                    [导入] [导出]  │
├─────────────────┬───────────────────────────────────────────┤
│  模组列表        │  编辑模式选择: [📂 分类] [⭐ 编辑节点]      │
│                 │  模组信息卡片: 版本、名称、描述、标签       │
│  ┌─────────────┐│                                           │
│  │ 模组 1      ││   ╔═════════════════════════════════╗     │
│  │ ▼           ││   ║  成就节点编辑区 (Canvas)          ║     │
│  │ 模组 2      ││   ║                                 ║     │
│  │ 模组 3      ││   ║  [⭐节点1]  ←─→  [⭐节点2]      ║     │
│  │             ││   ║       ↓           ↓             ║     │
│  └─────────────┘│   ║  [⭐节点3] ←─ [⭐节点4]        ║     │
│                 │   ║  (连线实时绘制)                 ║     │
│                 │   ╚═════════════════════════════════╝     │
│                 │                                           │
│                 │   ┌─────────────────────────────────┐    │
│                 │   │ 右侧控制面板                      │    │
│                 │   │                                 │    │
│                 │   │ [➕ 创建根节点]                  │    │
│                 │   │                                 │    │
│                 │   │ ─────────────────────────        │    │
│                 │   │ 选中节点: 节点1                   │    │
│                 │   │                                 │    │
│                 │   │ [📦 设置物品] ✓                 │    │
│                 │   │ [📝 设置描述] ✓                 │    │
│                 │   │ [🔗 设置父节点] (2)            │    │
│                 │   │ [🗑️ 删除节点]                   │    │
│                 │   │                                 │    │
│                 │   │ [✅ 保存更改]                   │    │
│                 │   └─────────────────────────────────┘    │
│                 │                                           │
├─────────────────┴───────────────────────────────────────────┤
│  最近协作                                                    │
│  玩家A → 分类B (2026-01-20 10:30)                          │
│  玩家C → 分类A (2026-01-20 10:25)                          │
└─────────────────────────────────────────────────────────────┘
```

## 各部分详细说明

### 1. 左侧模组列表
```
模组列表
├─ 模组1 (已选中)
│  └── 5个物品
├─ 模组2
│  └── 12个物品
└─ 模组3
   └── 8个物品
```
- 显示所有模组
- 点击选中一个模组
- 右侧显示该模组的内容

### 2. 模组卡片
```
┌─────────────────────────────────┐
│ v1.0.2                          │
│ 模组名称                         │
│ 这是模组描述信息                   │
│ [标签1] [标签2] [标签3]          │
│                                 │
│ [📂 分类]  [⭐ 编辑节点]        │
└─────────────────────────────────┘
```
- v X.Y.Z：模组版本号
- 模组名称和描述
- 相关标签
- 模式切换按钮

### 3. Canvas 节点区域

#### 节点样式

**未选中节点（悬停时）**
```
    ┌──────────────┐
    │              │
    │    [🌾]      │  物品贴图显示
    │              │  或默认 ⭐ 符号
    └──────────────┘
      节点名称
```

**选中节点**
```
    ┌══════════════┐  (绿色高亮边框)
    │              │
    │    [🌾]      │  
    │              │
    └══════════════┘
      节点名称
```

**拖拽中的节点**
```
    ┌┈┈┈┈┈┈┈┈┈┈┈┈┐  (虚线边框)
    │              │
    │    [🌾]      │  (透明度降低)
    │              │
    └┈┈┈┈┈┈┈┈┈┈┈┈┘
```

#### 连线样式

**节点间的连线**
```
    [节点1]
       │
       ↓（箭头指向父节点）
    ╭─────╮
    │贝塞尔│
    │ 曲线 │
    ╰─────╯
       │
       ↓
    [节点2]（父节点）
```

### 4. 右侧控制面板

#### 按钮菜单

```
[➕ 创建根节点]  (绿色，创建新节点)
  背景: rgba(124, 242, 156, 0.1)
  边框: var(--accent-strong)
  宽度: 100%

[📦 设置物品]    (蓝色，关联物品)
[📝 设置描述]    (蓝色，编辑描述)  
[🔗 设置父节点]  (蓝色，建立关系)
[🗑️ 删除节点]    (红色，删除操作)
  背景: rgba(255, 68, 68, 0.1)
  边框: rgba(255, 68, 68, 0.3)
  文字: #ff4444

[✅ 保存更改]    (绿色，提交更改)
  背景: var(--accent-strong)
  文字: #000 (对比)
  宽度: 100%
```

## 弹窗布局

### 物品选择弹窗

```
╔════════════════════════════════════╗
║ 选择物品                        [关闭] ║
║ 为节点分配物品                      ║
╟────────────────────────────────────╢
║ 物品网格 (6列)                      ║
║                                    ║
║ [🌾] [⚒️] [🔨] [💎] [🌲] [📦]   ║
║ [🎫] [🍖] [🥘] [🧂] [🥙] [🍞]   ║
║ [🌽] [🥕] [🧄] [🧅] [🥬] [🍅]   ║
║                                    ║
║ （可滚动，显示所有模组物品）        ║
╚════════════════════════════════════╝
```

### 父节点选择弹窗

```
╔════════════════════════════════════╗
║ 设置父节点                      [完成] ║
║ 选择一个或多个父节点                ║
╟────────────────────────────────────╢
║ 可用节点列表 (竖向)                 ║
║                                    ║
║ [🌾] 节点名称                      ║
║      物品描述    ✓ (已选中)        ║
║                                    ║
║ [⭐] 另一个节点                     ║
║      节点描述                      ║
║                                    ║
║ [📦] 第三个节点                     ║
║      节点描述                      ║
║                                    ║
║ （可滚动，不包含自身和子孙）        ║
╚════════════════════════════════════╝
```

### 描述编辑弹窗

```
╔════════════════════════════════════╗
║ 编辑描述                        [关闭] ║
║ 节点名称                            ║
╟────────────────────────────────────╢
║ ┌────────────────────────────────┐║
║ │ 输入节点描述...                │║
║ │                                 ││
║ │ 这是一个多行文本编辑框          ││
║ │ 支持换行和格式化                ││
║ │                                 ││
║ │ 最小高度 120px，可拖拽调整大小   ││
║ │                                 ││
║ └────────────────────────────────┘║
║ （失去焦点自动保存）                ║
╚════════════════════════════════════╝
```

## 交互流程

### 创建节点流程
```
点击 [➕ 创建根节点]
  ↓
生成新节点（自动命名）
  ↓
节点显示在 Canvas 上
  ↓
自动排列位置（3列布局）
```

### 编辑节点流程
```
点击节点
  ↓
节点高亮显示
  ↓
右侧面板显示操作菜单
  ↓
选择操作（物品/描述/父节点/删除）
  ↓
弹窗打开
  ↓
完成操作
  ↓
弹窗关闭，更新 Canvas
```

### 设置关系流程
```
点击 [🔗 设置父节点]
  ↓
弹窗打开，显示可用节点
  ↓
点击目标节点（可多选）
  ↓
系统检测循环依赖
  ├─ 若会形成循环：显示警告，操作取消
  └─ 若无循环：建立关系，更新连线
  ↓
连线实时绘制
```

## 颜色和样式参考

### CSS 变量
```css
--accent-strong  = rgba(124, 242, 156, ...) /* 绿色，主操作 */
--accent         = rgba(109, 211, 255, ...) /* 蓝色，次操作 */
--text           = var(--text)              /* 文字颜色 */
--border         = var(--border)            /* 边框颜色 */
--muted          = rgba(128, 128, 128, ...) /* 灰色，辅助 */
```

### 按钮样式
- **圆角**：6px
- **内边距**：8-12px
- **过渡**：0.15s ease
- **悬停效果**：边框变色、背景变浅

### 节点样式
- **大小**：60×60px
- **圆角**：12px
- **字体**：28px 表情符号
- **边框**：1-2px

## 响应式设计

### 桌面端 (宽度 > 1024px)
```
左侧 (20%) | 右侧 (80%)
  列表        编辑区 + 控制面板
```

### 平板端 (宽度 768-1024px)
```
左侧 (25%) | 右侧 (75%)
  列表        编辑区 + 控制面板 (调整大小)
```

### 手机端 (宽度 < 768px)
```
上：列表 (可折叠)
下：编辑区 (全宽)
  控制面板 (浮动或下方)
```

---

**设计完成日期**：2026-01-20  
**UI/UX 设计**：Modern Glass-morphism  
**无障碍考虑**：支持键盘导航和屏幕阅读器（可扩展）
