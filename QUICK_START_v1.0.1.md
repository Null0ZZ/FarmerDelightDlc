# 🎯 三大新功能快速上手指南

> **更新时间**：2026-01-20  
> **版本**：1.0.1  
> **开发环境**：Vite 5.4.21 | React 18 | TypeScript

---

## 🌟 新增功能概览

### 功能 1️⃣：子节点一键创建
**作用**：快速扩展成就树，自动建立父子关系

### 功能 2️⃣：泛光直线连接
**作用**：更清晰的视觉效果，科幻感的动画

### 功能 3️⃣：分类物品筛选网格
**作用**：高效查找和分配物品给节点

---

## 💡 实战演练

### 场景 A：构建基础成就树（3 个节点）

```
目标结构：
    [根节点]
      ├─ [子节点 1]
      └─ [子节点 2]
```

**操作步骤**：

1. **创建根节点**
   ```
   菜单 → "⭐ 编辑节点"
   在对话框中按 [创建节点]
   Canvas 上会出现一个新节点
   ```

2. **为根节点分配物品**
   ```
   左键点击节点
   右侧菜单 → [📦 设置物品]
   
   在物品选择器中：
   • 点击 [全部] 查看所有物品
   • 或点击 [工具] 只看工具类
   • 点击想要的物品（如 ⚒️）
   • 点击 [关闭]
   
   现在节点上显示 ⚒️ 图标
   ```

3. **创建第一个子节点**
   ```
   确保该节点还在选中状态（高亮）
   右侧菜单 → [➕ 创建子节点]
   
   一个新节点会在右下方出现，自动连线！
   ```

4. **重复步骤 2：为子节点分配物品**
   ```
   • 点击新子节点
   • [📦 设置物品]
   • 选择一个物品
   • [关闭]
   ```

5. **创建第二个子节点**
   ```
   点击根节点（重新选中）
   [➕ 创建子节点]
   
   再次得到一个子节点
   ```

6. **完成！** 🎉
   ```
   现在你有了这样的结构：
   
   [⚒️]  ← 根节点
    │
    ├─→ [🔨]  ← 子节点1（直线 + 泛光）
    │
    └─→ [💎]  ← 子节点2（直线 + 泛光）
   ```

---

### 场景 B：深层成就树（多级继承）

```
目标结构：
    [根]
     ├─ [子1]
     │   ├─ [孙1]
     │   └─ [孙2]
     └─ [子2]
         └─ [孙3]
```

**快速构建步骤**：

| 步骤 | 操作 | 结果 |
|------|------|------|
| 1 | 创建根节点 + 分配物品 | [⚒️] 出现 |
| 2 | 选中根，创建子节点1 + 分配物品 | [⚒️] → [🔨] |
| 3 | 选中子节点1，创建孙节点1 + 分配物品 | [🔨] → [⚙️] |
| 4 | 选中子节点1，创建孙节点2 + 分配物品 | [🔨] → [🔧] |
| 5 | 选中根，创建子节点2 + 分配物品 | [⚒️] → [💎] |
| 6 | 选中子节点2，创建孙节点3 + 分配物品 | [💎] → [⚡] |

**关键技巧**：
- ✅ 每次创建子节点前，必须先**选中**要作为父节点的节点
- ✅ 点击菜单中的 **[➕ 创建子节点]** 按钮
- ✅ 新节点自动出现并连接到父节点

---

### 场景 C：高效物品分配（使用新筛选功能）

```
假设你的模组有这些分类：
├─ 工具（⚒️ 🔨 🔧 等）
├─ 装饰（🌲 🌾 🪨 等）
├─ 食物（🍎 🥕 🥖 等）
└─ 其他（📦 🎫 🧂 等）
```

**高效方式**：

1. **第一次分配：工具类**
   ```
   节点1 → [📦 设置物品]
   
   物品选择器：
   [全部] [工具] [装饰] [食物] [其他]
           ↑ 点这个
   
   现在只显示 10 列的工具类物品
   选一个工具 → [关闭]
   ```

2. **第二次分配：装饰类**
   ```
   节点2 → [📦 设置物品]
   
   [全部] [工具] [装饰] [食物] [其他]
                  ↑ 点这个
   
   现在只显示装饰物品
   选一个 → [关闭]
   ```

3. **优势对比**：

| 操作 | 旧方法 | 新方法 |
|------|--------|--------|
| 每行显示 | 6 列 | 10 列 |
| 查找物品 | 手动翻页查找 | 分类标签快速筛选 |
| 查找效率 | 🐢 慢 | 🚀 快 |
| 操作次数 | 多（翻页） | 少（直接选择） |

---

## 🎨 新增效果详解

### 💫 泛光直线连接效果

**你会看到什么**：

```
时刻 T=0   ┃ [节点A] ─────⟶ [节点B]   （较暗）
时刻 T=0.5 ┃ [节点A] ═════⟶ [节点B]   （中等亮度）
时刻 T=1.0 ┃ [节点A] ═════⟶ [节点B]   （最亮）
时刻 T=1.5 ┃ [节点A] ═════⟶ [节点B]   （中等亮度）
时刻 T=2.0 ┃ [节点A] ─────⟶ [节点B]   （较暗）

然后循环...
```

**特点**：
- 🟢 绿色光线（RGB: 124, 242, 156）
- 📈 亮度范围：20% ~ 60%
- ⏱️ 周期：2 秒一个完整呼吸
- ✨ 外层：8px 柔和光晕
- 🎯 箭头：指向父节点

### 📦 10列物品网格

**旧网格（6列）**：
```
┌─────────────────────────┐
│ [🌾] [⚒️] [🔨] [💎] [🌲] │
│ [📦] [🎫] [🍖] [🥘] [🧂] │
│ [🥙] [🍞] [🌽] [🥕] [🧄] │
│ [🧅] [🥬] [🍅] [🍌] [🥝] │
└─────────────────────────┘
```
一次显示：20 个物品

**新网格（10列）**：
```
┌──────────────────────────────────────┐
│ [🌾][⚒️][🔨][💎][🌲][📦][🎫][🍖][🥘][🧂] │
│ [🥙][🍞][🌽][🥕][🧄][🧅][🥬][🍅][🍌][🥝] │
└──────────────────────────────────────┘
```
一次显示：20 个物品（但每行更紧凑）

**优势**：
- 视野更宽，易于扫视和比较
- 按钮更小，占用空间少
- 配合分类筛选，找到目标更快

---

## ⚡ 快速参考

### 常用快捷操作

| 想要做 | 操作 |
|-------|------|
| 创建节点 | 菜单 → "⭐ 编辑节点" → [创建节点] |
| 创建子节点 | 选中节点 → 右侧 [➕ 创建子节点] |
| 分配物品 | 选中节点 → 右侧 [📦 设置物品] |
| 筛选物品 | 物品选择器 → 点击分类标签 |
| 设置描述 | 选中节点 → 右侧 [📝 设置描述] |
| 设置父节点 | 选中节点 → 右侧 [🔗 设置父节点] |
| 删除节点 | 选中节点 → 右侧 [🗑️ 删除节点] |
| 导入数据 | 菜单 → "📥 导入节点数据" |
| 导出数据 | 菜单 → "📤 导出节点数据" |

### 物品分类标签

```
当你点击 [📦 设置物品] 时，会看到这些标签：

[全部]   → 显示所有物品（无筛选）
[工具]   → ⚒️ 🔨 🔧 等工具类
[装饰]   → 🌲 🌾 🪨 🌸 等装饰品
[食物]   → 🍎 🥕 🥖 🍖 等食物
[其他]   → 📦 🎫 🧂 等杂项

（具体分类取决于你的模组配置）
```

---

## 🐛 常见问题

### Q1: 为什么创建子节点后没有看到连线？
**A**: 
- 确保子节点在 Canvas 显示区域内
- 如果重叠了，拖拽父节点查看子节点
- 刷新页面试试

### Q2: 物品选择器中只显示一个分类的物品？
**A**: 
- 检查是否点击了某个分类标签
- 点击 **[全部]** 标签回到显示所有物品
- 或继续点击其他分类标签查看

### Q3: 子节点连接线太淡看不清？
**A**: 
- 这是泛光效果，会自动亮起来
- 等待 1-2 秒，看线条是否变亮
- 线条应该在 2 秒周期内亮暗变化

### Q4: 能拖动节点改变位置吗？
**A**: 
- 目前不支持拖动
- 子节点自动位置在父节点右下方（x+120, y+80）
- 未来版本可能会支持

### Q5: 子节点是否有限制？
**A**: 
- 不限制深度（可创建孙节点、曾孙节点...）
- 不限制数量
- 系统会检测循环依赖（A→B→A 的情况）

---

## 🚀 开发环境

当前环境信息：
```
项目框架：Vite 5.4.21
UI 库：React 18
开发语言：TypeScript
编辑器：VS Code

开发服务器：http://localhost:5173/
构建输出：dist/

启动开发：npm run dev
构建生产：npm run build
```

---

## 📊 功能完整性检查表

在使用新功能前，检查一下这些项目：

- [ ] 可以正常访问编辑器页面
- [ ] 可以创建节点
- [ ] 节点右侧菜单显示所有选项（包括 ➕ 创建子节点）
- [ ] 可以点击 [➕ 创建子节点] 创建新节点
- [ ] 新节点自动连接到父节点（看到绿色直线）
- [ ] 连接线能看到泛光效果（线条亮暗变化）
- [ ] 点击 [📦 设置物品] 能打开物品选择器
- [ ] 物品选择器显示分类标签
- [ ] 物品网格显示 10 列
- [ ] 点击分类标签能快速筛选物品
- [ ] 导入/导出功能正常

全部通过 ✅ 说明安装成功！

---

## 💬 反馈和建议

如果你发现问题或有改进建议：

1. **关于创建子节点**
   - 位置合适吗？
   - 是否希望支持手动位置调整？

2. **关于泛光效果**
   - 亮度合适吗？
   - 闪烁速度合适吗？
   - 颜色喜欢吗？

3. **关于物品网格**
   - 10 列够吗？
   - 分类筛选有用吗？
   - 是否需要搜索功能？

---

**现在就开始使用新功能吧！** 🎉

访问 → http://localhost:5173/  
菜单 → "⭐ 编辑节点"  
创建你的成就树！

