# 成就节点编辑器 - 快速开始

## 功能总结

你现在已经有了一个完整的**成就节点编辑器**功能！这是一个高级特性，允许你为每个模组创建复杂的树形或网络结构的成就系统。

## 立即体验

1. **打开网站**：访问 http://localhost:5173/ （本地开发）或已部署的 Vercel 链接
2. **选择模组**：左侧选择一个模组
3. **切换模式**：点击模组卡片顶部的 **⭐ 编辑节点** 按钮
4. **开始编辑**：
   - 点击 "➕ 创建根节点" 创建第一个节点
   - 点击节点，右侧会显示操作菜单
   - 为节点设置物品、描述、父节点等属性
   - 连线会自动实时绘制

## 核心特性

### 1. 节点管理
```
创建 → 选中 → 编辑（物品/描述/父节点）→ 删除
```

### 2. 关系管理
- **一对多**：一个父节点可以有多个子节点
- **多对一**：一个节点可以有多个父节点
- **自动检测**：系统防止循环依赖

### 3. 可视化
- **实时连线**：使用贝塞尔曲线绘制
- **箭头指向**：指向父节点，表示依赖方向
- **自动布局**：节点自动在画布上排列

## 数据持久化

### 导出数据
点击顶部的 "导出配置" 按钮，exported JSON 会包含完整的成就节点信息：

```json
{
  "mods": [
    {
      "id": "mod-1",
      "name": "示例模组",
      "achievementGraph": {
        "modId": "mod-1",
        "nodes": [
          {
            "id": "node-1",
            "name": "开始",
            "itemId": "item-1",
            "description": "第一个成就",
            "parentNodeIds": [],
            "position": { "x": 100, "y": 100 }
          }
        ]
      }
    }
  ]
}
```

### 导入数据
点击 "导入配置"，上传包含节点信息的 JSON 文件，数据会被完整恢复。

## 工作流示例

### 场景：创建一个 Minecraft 模组的成就树

1. 进入编辑节点模式
2. 创建根节点 "开始冒险"，关联一个入门物品
3. 创建节点 "学会挖矿"，设置父节点为 "开始冒险"
4. 创建节点 "获得铁矿"，设置父节点为 "学会挖矿"
5. 创建节点 "学会冶炼"，设置父节点为 "获得铁矿"
6. 创建节点 "制作钻石工具"，可以设置多个父节点：
   - "学会冶炼"
   - "获得钻石"
7. 保存并导出，完整的成就树就创建完成了

连线会自动显示所有的依赖关系，形成一个清晰的视觉效果。

## 技术实现亮点

- ✅ **Canvas 绘制**：使用 HTML5 Canvas 实时绘制连线
- ✅ **Bezier 曲线**：平滑的连接线条
- ✅ **拓扑检测**：自动防止循环依赖
- ✅ **状态管理**：React hooks 管理节点状态
- ✅ **实时更新**：所有操作即时反映在界面上

## 后续扩展建议

1. **节点拖动**：支持拖动节点改变位置
2. **缩放平移**：支持画布缩放和拖动
3. **样式定制**：支持节点颜色、大小、图标等定制
4. **分层显示**：按成就等级自动分层排列
5. **导出图片**：将成就树导出为图片文件
6. **实时协作**：WebSocket 支持多人同时编辑

## 常见问题

**Q: 如何修改节点的坐标位置？**
A: 目前节点位置由系统自动分配。如需自定义位置，可扩展拖动功能。

**Q: 能否同时删除一个节点及其所有子节点？**
A: 目前只能单独删除每个节点，子节点不会被自动删除。这样设计是为了防止误操作。

**Q: 节点数据存储在哪里？**
A: 存储在浏览器本地状态中，通过 JSON 导出/导入持久化。后续可连接真实后端数据库。

**Q: 支持多人实时编辑吗？**
A: 目前是单用户本地编辑。多人实时编辑需要接入 WebSocket 等实时通信技术。

---

**祝你使用愉快！如有问题或建议，欢迎提交 Issue 或 PR。**
